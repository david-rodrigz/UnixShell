#!/bin/bash

prg=./try

# test sleep function
test_sleep() {
    echo "Testing sleep function"

    # redirect program input to temporary file
    echo sleep $1 \; exit  > temp.txt
    
    # Capture the start time
    start_time=$(date +%s)

    # Sleep for 5 seconds
    echo "Sleeping for $1 seconds"
    $prg < temp.txt

    # Capture the end time
    end_time=$(date +%s)

    # delete temporary file
    rm temp.txt

    # Calculate the difference in seconds
    seconds_passed=$((end_time - start_time))

    if [ $seconds_passed -eq $1 ]; then
        echo "Sleep test PASSED"
    else
        echo "Sleep test FAILED"
    fi
}

test_sleep 5

# for t in Test/Test_* ; do
#     echo ${t##*/}
#     $prg <$t/inp 2>&1 >$t/out
#     diff -q -w $t/exp $t/out 2>&1 >/dev/null || echo ${t##*/} failed >&2
# done
